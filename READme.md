# Building a Map Interface Apps using a Geo JSON GraphQL API

Developing apps that rely on geo coordinates to enable features go far beyond simply storing latitude and longitude data. Geo coordinate algorithms that calculate bounds and distances can be a fun brain challenge to implement, though more often than not they become time consuming distractions from one's core project.

In this tutorial, we’re going to look at how we can quickly set up and use an API that has advanced and ready to use Geo Coordinate operations. It doesn’t matter whether you are building a real estate application that’s map based, a food reviews site that shows the distance a user is from the restaurant, or any other app that will need to work with geo coordinate data; this tutorial will apply to any such use case.

That said, we’re going to use the example of a food reviews app that needs to show user’s the distance they are from a reviewed restaurant. So let’s do it!

## Tutorial

To start, you’re going to need an 8base Workspace. The free plan will work just fine for this tutorial, so go ahead and sign up at app.8base.com if you haven’t already.

Once logged into 8base, we’re going to want to set up a simple data model for our reviews. It’s going to look like this:

**Restaurants**

- name: Text
- location: Geo
- Reviews: has_many Reviews

**Reviews**

- content: Text
- rating: Number
- Restaurant: has_one Restaurants

## Importing the Data Model and Seed Data

You’re welcome to quickly construct this data model using the 8base data builder. However, I'd recommend importing the schema and seed data using the CLI. It will not only quickly set up the data model, but also populate the database with 20 restaurants and 40 reviews.

The following commands will quickly get you up and running! You'll want to feed the last `import` command a path to [this file](./schema-and-data.json).

```sh
# Install the cli
npm install -g 8base-cli
# Authenticate the CLI
8base login
# Create a empty 8base project and select workepace
8base init rr-tutorial
# Import the schema
8base import -f [PATH_TO schema-and-data.json]
```

At this point the data model should be set up and the seed data ready to use! You can hop back into the 8base console and look at the Data Builder/Viewer to see the imported schema and records. It will look like the screen shot below.

![8base data viewer with imported records](.assets/import-success.png)

## Reviewing the Saved Location Data

If you look at the _Restaurants_ table, you'll see there is a field called _location_ that has the type _Geo_ selected with the format set to _Point_. Geo Points are simply a latitude and longitude coordinate that together reference a specific point on the map.

Now switch over to the `Data` tab and you'll see the _Location_ column displaying all the latitude and longitude coordinates in arrays. This is how the API recieved the data, though when editing a record via the UI 8base separates out the two values.

![Editing latitude and longitude fields in 8base console](.assets/edit-lat-lng.png)

With this GraphQL API being auto-generated by 8base, all our geo coordinate operations are actually ready to be used. So lets pop over to the API Explorer to see what kind of queries and mutations we have access to.

## Writing Queries with Geo Filtering

There are a number of ways to get a user's current location when they are using your app or website.

```js
if (!navigator.geolocation) {
  navigator.geolocation.getCurrentPosition(
    ({ coords: { latitude, longitude } }) => console.log([latitude, longitude]),
    () => console.log('Something went wrong!')
  )
}
```
